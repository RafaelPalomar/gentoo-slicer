From 5db24aac2f9e52f95c665c32c4c99857a3de660d Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Wed, 5 Dec 2018 19:12:45 +0100
Subject: [PATCH] Fix development paths

---
 CMake/SlicerInstallConfig.cmake.in |  2 ++
 CMake/UseSlicer.cmake.in           | 11 +++++------
 2 files changed, 7 insertions(+), 6 deletions(-)

diff --git a/CMake/SlicerInstallConfig.cmake.in b/CMake/SlicerInstallConfig.cmake.in
index e29f391b0..543f5341c 100644
--- a/CMake/SlicerInstallConfig.cmake.in
+++ b/CMake/SlicerInstallConfig.cmake.in
@@ -143,3 +143,5 @@ set(CMAKE_MODULE_PATH
   ${CMAKE_MODULE_PATH}
   ${CTK_CMAKE_UTILITIES_DIR})
 
+
+set(Slicer_INSTALL_PREFIX "@CMAKE_INSTALL_PREFIX@")
diff --git a/CMake/UseSlicer.cmake.in b/CMake/UseSlicer.cmake.in
index 9047915b4..8e738bcda 100644
--- a/CMake/UseSlicer.cmake.in
+++ b/CMake/UseSlicer.cmake.in
@@ -40,7 +40,6 @@
 #
 
 set(Slicer_EXPORT_HEADER_TEMPLATE ${Slicer_CMAKE_DIR}/qSlicerExport.h.in)
-set(Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR ${Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR})
 
 # --------------------------------------------------------------------------
 # Helper function(s) and macro(s)
@@ -322,11 +321,11 @@ if(Slicer_BUILD_CLI_SUPPORT)
   endif()
 endif()
 
-set(Slicer_INSTALL_QTLOADABLEMODULES_BIN_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTLOADABLEMODULES_BIN_DIR}")
-set(Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTLOADABLEMODULES_LIB_DIR}")
-set(Slicer_INSTALL_QTLOADABLEMODULES_PYTHON_LIB_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTLOADABLEMODULES_PYTHON_LIB_DIR}")
-set(Slicer_INSTALL_QTLOADABLEMODULES_INCLUDE_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTLOADABLEMODULES_INCLUDE_DIR}")
-set(Slicer_INSTALL_QTLOADABLEMODULES_SHARE_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTLOADABLEMODULES_SHARE_DIR}")
+set(Slicer_INSTALL_QTLOADABLEMODULES_BIN_DIR "${Slicer_CMAKE_PREFIX}/${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_INSTALL_QTLOADABLEMODULES_BIN_DIR}")
+set(Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR "${Slicer_CMAKE_PREFIX}/${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR}")
+set(Slicer_INSTALL_QTLOADABLEMODULES_PYTHON_LIB_DIR "${Slicer_CMAKE_PREFIX}/${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_INSTALL_QTLOADABLEMODULES_PYTHON_LIB_DIR}")
+set(Slicer_INSTALL_QTLOADABLEMODULES_INCLUDE_DIR "${Slicer_CMAKE_PREFIX}/${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_INSTALL_QTLOADABLEMODULES_INCLUDE_DIR}")
+set(Slicer_INSTALL_QTLOADABLEMODULES_SHARE_DIR "${Slicer_CMAKE_PREFIX}/${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_INSTALL_QTLOADABLEMODULES_SHARE_DIR}")
 
 if(Slicer_USE_PYTHONQT)
   set(Slicer_INSTALL_QTSCRIPTEDMODULES_BIN_DIR "${Slicer_INSTALL_ROOT}${Slicer_BUNDLE_EXTENSIONS_LOCATION}${Slicer_QTSCRIPTEDMODULES_BIN_DIR}")
-- 
2.19.2

